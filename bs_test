import socket
import sys
import os


#chamar a fun√ßao child quando for necessario criar novo processo
def main():
    users = {}
    if(len(sys.argv) == 4 and (isinstance(sys.argv[1], int))):
        CSport = input("Port: ")
    elif(len(sys.argv) == 3):
        raise TypeError('Error: invalid input.')
    else:
        CSport = 58017
        BSport = 59000

    scktUDP = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    udp_server_address = (socket.gethostbyname('lab6p4'), CSport)
    #scktUDP.bind(udp_server_address)
    cenas = "+BS: ola jorge\n"
    #scktUDP.sendto(cenas.encode(), (socket.gethostbyname(socket.gethostname()), BSport))
    scktUDP.sendto(cenas.encode(), (socket.gethostbyname('lab6p4'), CSport))
    msg = scktUDP.recvfrom(1024)
    while msg:
        print(msg.decode())
        print('\nA new child ',  os.getpid())
    scktUDP.close()

    return 0


main()
